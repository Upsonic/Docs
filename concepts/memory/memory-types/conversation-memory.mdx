---
title: "Conversation Memory"
description: "Store complete chat history for maintaining context"
---

## Overview

Conversation Memory persists the complete chat history for a session, enabling agents to reference previous messages and maintain context across interactions.

## Basic Usage

```python
from upsonic import Agent, Task
from upsonic.storage.memory import Memory
from upsonic.storage.sqlite import SqliteStorage

storage = SqliteStorage(db_file="chat.db")

memory = Memory(
    storage=storage,
    session_id="session_001",
    full_session_memory=True
)

agent = Agent("openai/gpt-5", memory=memory)

result1 = agent.do(Task("My name is Alice"))
result2 = agent.do(Task("What's my name?"))
print(result2)  # "Your name is Alice"
```

## With Message Limiting

Control memory size by limiting to the last N conversation turns:

```python
from upsonic import Agent, Task
from upsonic.storage.memory import Memory
from upsonic.storage.sqlite import SqliteStorage

storage = SqliteStorage(db_file="limited.db")

memory = Memory(
    storage=storage,
    session_id="session_001",
    full_session_memory=True,
    num_last_messages=10  # Keep last 10 turns only
)

agent = Agent("openai/gpt-5", memory=memory)

result = agent.do(Task("Let's continue our discussion"))
print(result)
```

## With Tool Call Results

Include tool execution results in the conversation history:

```python
from upsonic import Agent, Task
from upsonic.storage.memory import Memory
from upsonic.storage.sqlite import SqliteStorage
from upsonic.tools import tool

@tool
def get_weather(city: str) -> str:
    """Get weather for a city."""
    return f"Weather in {city}: 72Â°F, Sunny"

storage = SqliteStorage(db_file="tools.db")

memory = Memory(
    storage=storage,
    session_id="session_001",
    full_session_memory=True,
    feed_tool_call_results=True  # Include tool outputs in history
)

agent = Agent("openai/gpt-5", tools=[get_weather], memory=memory)

result1 = agent.do(Task("What's the weather in NYC?"))
result2 = agent.do(Task("What was the weather you just told me?"))
print(result2)  # Can reference previous tool results
```

## Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `full_session_memory` | `bool` | `False` | Enable conversation history |
| `session_id` | `str` | auto-generated | Session identifier |
| `num_last_messages` | `int \| None` | `None` | Limit to last N turns |
| `feed_tool_call_results` | `bool` | `False` | Include tool outputs |
