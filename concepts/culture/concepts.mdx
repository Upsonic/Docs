---
title: "Concepts"
description: "Understanding Cultural Knowledge architecture and components"
sidebarTitle: Concepts
---

## Concepts

## What is Cultural Knowledge?

Cultural Knowledge represents **shared organizational wisdom** that improves agent performance. Unlike User Memory (which stores user traits, preferences, and user-specific information), cultural knowledge is universal.
It applies to agent, not specific user.

- **Universal**: Applies to all agents, not specific users


### Cultural Knowledge vs. User Memory

| Aspect | Cultural Knowledge | User Memory |
|--------|-------------------|-------------|
| **Scope** | Universal, shared | User-specific |
| **Purpose** | Principles, guidelines, best practices | User traits, preferences, characteristics |
| **Storage** | Optional - shared across all agents | Per-user, per-session |
| **Use Case** | "Always be helpful" | "User prefers formal tone" |
| **Requires Storage** | No | Yes |

## Core Components

### 1. CulturalKnowledge

Data model for cultural knowledge:

```python
from upsonic.culture import CulturalKnowledge

knowledge = CulturalKnowledge(
    name="Code Review Standards",  # Required
    summary="Focus on security and performance",
    content="- Check for security vulnerabilities\n- Verify error handling",
    categories=["engineering", "code-review"],
    notes=["Always be constructive"]
)
```

**Key Fields:**
- `name`: Short, specific title (required)
- `summary`: One-line purpose
- `content`: Detailed principles or guidelines
- `categories`: Tags for organization
- `notes`: Contextual notes or examples

### 2. CultureManager

Handles user input and formatting:

- Accepts `CulturalKnowledge` instances or string descriptions
- Extracts structured knowledge from strings (using AI)
- Combines user input with stored knowledge
- Formats knowledge for system prompt injection

**Key Methods:**
- `get_combined_knowledge()`: Get user input + stored knowledge
- `format_for_system_prompt()`: Format for injection

### 3. CultureMemory

Handles storage operations (optional):

- Loads/saves cultural knowledge from/to storage
- Supports filtering by `agent_id`, `team_id`, categories

**Note**: Usually managed automatically by `Memory` class when `culture_memory_enabled=True`.

### 4. Memory Integration

The `Memory` class orchestrates cultural knowledge:

- Manages `CultureMemory` instance
- Loads stored knowledge during preparation
- Saves knowledge after agent runs

```python
from upsonic.storage.memory import Memory
from upsonic.storage.sqlite import SqliteStorage

storage = SqliteStorage(db_file="culture.db")
memory = Memory(
    storage=storage,
    session_id="session_001",
    user_id="user_123",
    culture_memory_enabled=True,  # Enables CultureMemory
    model="openai/gpt-4o"
)
```

## How It Works

1. **Agent Creation**: `CultureManager` is created with user input (string or instance)
2. **Memory Preparation**: Stored knowledge is loaded (if storage configured) and combined with user input
3. **System Prompt Injection**: Combined knowledge is formatted and injected into agent's system prompt
4. **Session Saving**: Cultural knowledge is saved to storage (if configured) after agent completes

## Storage Backends

Works with all storage backends: SQLite, PostgreSQL, MongoDB, Redis, JSON, In-Memory, Mem0.

```python
# Example: SQLite
from upsonic.storage.sqlite import SqliteStorage
storage = SqliteStorage(db_file="culture.db")

# Store knowledge
knowledge = CulturalKnowledge(name="Security Guidelines", content="...")
storage.upsert_cultural_knowledge(knowledge)

# Query knowledge
all_knowledge = storage.get_all_cultural_knowledge(limit=10)
```

## Summary

- **CulturalKnowledge**: Data model for cultural knowledge
- **CultureManager**: Handles user input and formatting
- **CultureMemory**: Handles storage operations (optional)
- **Memory**: Orchestrates cultural knowledge with other memory types

The system automatically combines user input with stored knowledge (if storage is configured) and injects it into agent system prompts.
