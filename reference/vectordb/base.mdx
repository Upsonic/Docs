---
title: BaseVectorDBProvider
sidebarTitle: BaseVectorDBProvider
---

## Parameters

| Parameter                          | Type                                                  | Default    | Description                                                                                                                                                                                                                      |
| ---------------------------------- | ----------------------------------------------------- | ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `config`                            | `Config`                                             | Required   | A validated and immutable Config object containing all necessary parameters for the provider's operation                                                                                                                       |

## Functions

### `connect`

Establishes a connection to the vector database.

This method uses the connection parameters from `self._config.core` to initialize the database client and verify the connection.

**Raises:**
- `VectorDBConnectionError`: If the connection fails.

### `disconnect`

Gracefully terminates the connection to the vector database.

### `is_ready`

Performs a health check to ensure the database is responsive.

**Returns:**
- `bool`: True if the database is connected and responsive, False otherwise.

### `create_collection`

Creates the collection in the database according to the full config.

This method reads all necessary parameters from `self._config`—including vector size, distance metric, indexing configuration, and sharding—to create and configure the collection. It should handle the `recreate_if_exists` logic from the core config.

**Raises:**
- `VectorDBConnectionError`: If not connected to the database.
- `VectorDBError`: If the collection creation fails for other reasons.

### `delete_collection`

Permanently deletes the collection specified in `self._config.core.collection_name`.

**Raises:**
- `VectorDBConnectionError`: If not connected to the database.
- `CollectionDoesNotExistError`: If the collection to be deleted does not exist.

### `collection_exists`

Checks if the collection specified in the config already exists.

**Returns:**
- `bool`: True if the collection exists, False otherwise.

### `upsert`

Adds new data or updates existing data in the collection.

This method is designed to be flexible, handling dense-only, sparse-only, or hybrid (dense + sparse) data based on the provided arguments. Implementations must validate that the provided data aligns with the collection's configured capabilities (e.g., rejecting sparse vectors if the index is dense-only).

**Parameters:**
- `vectors` (List[List[float]]): A list of dense vector embeddings.
- `payloads` (List[Dict[str, Any]]): A list of corresponding metadata objects.
- `ids` (List[Union[str, int]]): A list of unique identifiers for each record.
- `chunks` (Optional[List[str]]): Optional list of text chunks.
- `sparse_vectors` (Optional[List[Dict[str, Any]]]): An optional list of sparse vector representations. Each sparse vector should be a dict, e.g., {'indices': [...], 'values': [...]}.
- `**kwargs`: Provider-specific options.

**Raises:**
- `UpsertError`: If the data ingestion fails or if the provided data is inconsistent with the collection's configuration.

### `delete`

Removes data from the collection by their unique identifiers.

**Parameters:**
- `ids` (List[Union[str, int]]): A list of specific IDs to remove.
- `**kwargs`: Provider-specific options.

**Raises:**
- `VectorDBError`: If the deletion fails.

### `fetch`

Retrieves full records (payload and vector) by their IDs.

**Parameters:**
- `ids` (List[Union[str, int]]): A list of IDs to retrieve the full records for.
- `**kwargs`: Provider-specific options.

**Returns:**
- `List[VectorSearchResult]`: A list of VectorSearchResult objects containing the fetched data.

### `search`

A master search method that dispatches to the appropriate specialized search function based on the provided arguments and the provider's configured capabilities.

**Parameters:**
- `top_k` (Optional[int]): The number of results to return. If None, falls back to the default in the Config.
- `query_vector` (Optional[List[float]]): The vector for dense or hybrid search.
- `query_text` (Optional[str]): The text for full-text or hybrid search.
- `filter` (Optional[Dict[str, Any]]): An optional metadata filter.
- `alpha` (Optional[float]): The weighting factor for hybrid search. If None, falls back to the default in the Config.
- `fusion_method` (Optional[Literal['rrf', 'weighted']]): The algorithm to use for hybrid search ('rrf' or 'weighted').
- `similarity_threshold` (Optional[float]): The minimum similarity score for results. If None, falls back to the default in the Config.
- `**kwargs`: Additional provider-specific options.

**Returns:**
- `List[VectorSearchResult]`: A list of VectorSearchResult objects.

**Raises:**
- `ConfigurationError`: If the requested search is disabled or the wrong combination of arguments is provided.
- `SearchError`: If any underlying search operation fails.

### `dense_search`

Performs a pure vector similarity search.

**Parameters:**
- `query_vector` (List[float]): The vector embedding to search for.
- `top_k` (int): The number of top results to return.
- `filter` (Optional[Dict[str, Any]]): A metadata filter to apply. Defaults to None.
- `similarity_threshold` (Optional[float]): The minimum similarity score for results. Defaults to None.
- `**kwargs`: Additional provider-specific options.

**Returns:**
- `List[VectorSearchResult]`: A list of the most similar results.

### `full_text_search`

Performs a full-text search if the provider supports it.

**Parameters:**
- `query_text` (str): The text string to search for.
- `top_k` (int): The number of top results to return.
- `filter` (Optional[Dict[str, Any]]): A metadata filter to apply. Defaults to None.
- `similarity_threshold` (Optional[float]): The minimum similarity score for results. Defaults to None.
- `**kwargs`: Additional provider-specific options.

**Returns:**
- `List[VectorSearchResult]`: A list of matching results.

### `hybrid_search`

Combines dense and sparse/keyword search results.

This can be implemented by the provider in two ways:
1. Natively, if the backend supports a true hybrid search endpoint.
2. Manually, by calling dense_search and full_text_search and fusing the results.

**Parameters:**
- `query_vector` (List[float]): The dense vector for the semantic part of the search.
- `query_text` (str): The raw text for the keyword/sparse part of the search.
- `top_k` (int): The number of final results to return.
- `filter` (Optional[Dict[str, Any]]): An optional metadata filter.
- `alpha` (Optional[float]): The weight for combining scores. If None, falls back to the default in the Config.
- `fusion_method` (Optional[Literal['rrf', 'weighted']]): The algorithm to use for fusing results ('rrf' or 'weighted').
- `similarity_threshold` (Optional[float]): The minimum similarity score for results. If None, falls back to the default in the Config.
- `**kwargs`: Additional provider-specific options.

**Returns:**
- `List[VectorSearchResult]`: A list of VectorSearchResult objects, ordered by the combined hybrid score.
